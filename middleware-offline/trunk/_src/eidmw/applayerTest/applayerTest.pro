######################################################################
# Automatically generated by qmake (2.01a) Mon Jan 7 12:59:30 2008
######################################################################


include(../_Builds/eidcommon.mak)

TEMPLATE = app
TARGET = $${APPLAYERTEST}
VERSION = $${APPLAYERTEST_MAJ}.$${APPLAYERTEST_MIN}.$${APPLAYERTEST_REV}

message("Compile $$TARGET")

###
### Installation setup
###
target.path = $${INSTALL_DIR_BIN}
INSTALLS += target

###
### Compiler setup
###

CONFIG += debug
CONFIG -= warn_on qt

## destination directory for the compiler
DESTDIR = ../bin

DEPENDPATH += .
INCLUDEPATH += . \
	       ../eidlib \
               ../applayer \
               ../cardlayer \
               ../common \
	       ../dialogs \
               $${PCSC_INCLUDE_DIR}


LIBS += -L../lib  \
        -l$${CARDLAYEREMULIB}  \
        -l$${APPLAYEREMULIB}  \
	-l$${COMMONLIB} \
	-l$${DLGLIB} \
	-lcrypto \
	-lssl \
	-lpthread \
	-lxerces-c

unix:!macx:LIBS += -Wl,-R,"'\$\$ORIGIN/$${LINK_RELATIVE_PATH}'"

macx: LIBS += -L../../ThirdParty/Xerces/Xerces-2.8.0-mac/lib
macx: INCLUDEPATH += ../../ThirdParty/Xerces/Xerces-2.8.0-mac/include

BUILD_TESTS=yes ## needed by ../_Builds/eidtests.mak
include(../_Builds/eidtests.mak)

macx: QMAKE_LFLAGS +=  -bind_at_load

SOURCES += APLCertifTest.cpp \
           APLCryptoTest.cpp \
           APLReaderTest.cpp \
           CardFileTest.cpp \
           CertStatusCacheTest.cpp \
           CRLServiceTest.cpp \
           applayertest.cpp


## sources specific to a country

## do not define a conditional block with contains(PKG_NAME,pteid)
## otherwise the script which prepares the tarball will not
## be able to parse the project file correctly!
contains(PKG_NAME,pteid): SOURCES +=  APLCardPteidTest.cpp     \
           			     cryptoFwkPteidTest.cpp 


